<div *ngIf="form as control">
  <ng-container *ngFor="let field of fields">
    <div [ngSwitch]="field.type" *ngIf="!(field | fieldParent: form | async)">
      <!-- Short text input fields -->
      <dyna-text
        *ngSwitchCase="'text'"
        type="text"
        [control]="getControl(control, field)"
        [field]="field"
      >
      </dyna-text>

      <dyna-text
        *ngSwitchCase="'email'"
        type="email"
        [control]="getControl(control, field)"
        [field]="field"
      >
      </dyna-text>

      <dyna-text
        *ngSwitchCase="'tel'"
        type="tel"
        [control]="getControl(control, field)"
        [field]="field"
      >
      </dyna-text>

      <dyna-text
        *ngSwitchCase="'number'"
        type="number"
        [control]="getControl(control, field)"
        [field]="field"
      >
      </dyna-text>

      <dyna-text
        *ngSwitchCase="'url'"
        type="url"
        [control]="getControl(control, field)"
        [field]="field"
      >
      </dyna-text>

      <dyna-text
        *ngSwitchCase="'password'"
        type="password"
        [control]="getControl(control, field)"
        [field]="field"
      >
      </dyna-text>

      <!-- Longer text fields -->
      <dyna-textarea
        *ngSwitchCase="'textarea'"
        [control]="getControl(control, field)"
        [field]="field"
      >
      </dyna-textarea>

      <dyna-markdown
        *ngSwitchCase="'markdown'"
        [control]="getControl(control, field)"
        [field]="field"
      >
      </dyna-markdown>

      <!-- Other fields -->

      <dyna-radio
        *ngSwitchCase="'radio'"
        [control]="getControl(control, field)"
        [field]="field"
      ></dyna-radio>

      <dyna-color
        *ngSwitchCase="'color'"
        [control]="getControl(control, field)"
        [field]="field"
      ></dyna-color>

      <dyna-date
        *ngSwitchCase="'date'"
        [control]="getControl(control, field)"
        [field]="field"
      ></dyna-date>

      <dyna-chips
        *ngSwitchCase="'chips'"
        [control]="getControl(control, field)"
        [field]="field"
      ></dyna-chips>

      <dyna-info *ngSwitchCase="'info'" [field]="field"></dyna-info>

      <!-- Option fields -->
      <dyna-dropdown
        *ngSwitchCase="'dropdown'"
        [control]="getControl(control, field)"
        [field]="field"
      >
      </dyna-dropdown>

      <dyna-checkbox
        *ngSwitchCase="'checkbox'"
        [control]="getControl(control, field)"
        [field]="field"
      >
      </dyna-checkbox>

      <dyna-checkbox-group
        *ngSwitchCase="'checkbox-group'"
        [control]="getControl(control, field)"
        [field]="field"
      >
      </dyna-checkbox-group>

      <dyna-relation-select
        *ngSwitchCase="'relation'"
        [control]="getControl(control, field)"
        [field]="field"
      >
      </dyna-relation-select>

      <!-- Async fields -->
      <dyna-file
        *ngSwitchCase="'file'"
        [control]="getControl(control, field)"
        [field]="field"
      >
      </dyna-file>

      <dyna-action
        *ngSwitchCase="'action'"
        [control]="getControl(control, field)"
        [field]="field"
      >
      </dyna-action>

      <!-- Sub form fields -->
      <dyna-repeater
        *ngSwitchCase="'repeater'"
        [controlsArray]="getControl(control, field)"
        [field]="field"
        [fields]="field.fields"
      >
      </dyna-repeater>

      <dyna-group
        *ngSwitchCase="'group'"
        [control]="getControl(control, field)"
        [field]="field"
        [fields]="field.fields"
      >
      </dyna-group>

      <dyna-group
        *ngSwitchCase="'container'"
        [control]="getControl(control, field)"
        [field]="field"
        [fields]="field.fields"
      >
      </dyna-group>

      <div *ngSwitchDefault>
        {{ field.type }}
      </div>
    </div>
  </ng-container>

  <button
    class="dyna-button submit"
    *ngIf="!submit.hidden"
    [disabled]="form.invalid"
    (click)="submitValues()"
  >
    Submit
  </button>
</div>
