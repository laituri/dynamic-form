<div *ngIf="form">
  <ng-container *ngIf="config | async as config">
    <ng-container *ngFor="let field of config.fields">
      <div [ngSwitch]="field.type" *ngIf="!(field | fieldParent: form | async)">

        <dyna-text *ngSwitchCase="'text'" type="text" [control]="getControl(form,field)" [field]="field">
        </dyna-text>

        <dyna-text *ngSwitchCase="'email'" type="email" [control]="getControl(form,field)" [field]="field">
        </dyna-text>

        <dyna-text *ngSwitchCase="'tel'" type="tel" [control]="getControl(form,field)" [field]="field">
        </dyna-text>
        <dyna-text *ngSwitchCase="'number'" type="number" [control]="getControl(form,field)" [field]="field">
        </dyna-text>

        <dyna-text *ngSwitchCase="'url'" type="url" [control]="getControl(form,field)" [field]="field">
        </dyna-text>

        <dyna-textarea *ngSwitchCase="'textarea'" [control]="getControl(form,field)" [field]="field">
        </dyna-textarea>

        <dyna-dropdown *ngSwitchCase="'dropdown'" [control]="getControl(form,field)" [field]="field">
        </dyna-dropdown>

        <dyna-checkbox *ngSwitchCase="'checkbox'" [control]="getControl(form,field)" [field]="field">
        </dyna-checkbox>

        <dyna-checkbox-group *ngSwitchCase="'checkbox-group'" [control]="getControl(form,field)" [field]="field">
        </dyna-checkbox-group>

        <dyna-relation-select *ngSwitchCase="'relation'" [control]="getControl(form,field)" [field]="field">
        </dyna-relation-select>

        <dyna-sub-array-form *ngSwitchCase="'repeater'" [controlsArray]="getControl(form,field)" [field]="field"
                             [fields]="field.fields">
        </dyna-sub-array-form>

        <dyna-sub-group-form *ngSwitchCase="'map'" [control]="getControl(form,field)" [field]="field"
                             [fields]="field.fields">
        </dyna-sub-group-form>

        <div *ngSwitchDefault>
          {{field.type}}
        </div>
      </div>
    </ng-container>
  </ng-container>

  <button *ngIf="!submit.hidden" [disabled]="form.invalid" (click)="submitValues()">Submit</button>

  {{form.valid}}

</div>
