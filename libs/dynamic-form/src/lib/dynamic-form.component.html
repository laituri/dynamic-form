<div *ngIf="form as control">
  <ng-container *ngFor="let field of fields">
    <div [ngSwitch]="field.type" *ngIf="!(field | fieldParent: form | async)">

      <!-- Short text input fields -->
      <dyna-text *ngSwitchCase="'text'" type="text" [control]="getControl(control,field)" [field]="field">
      </dyna-text>

      <dyna-text *ngSwitchCase="'email'" type="email" [control]="getControl(control,field)" [field]="field">
      </dyna-text>

      <dyna-text *ngSwitchCase="'tel'" type="tel" [control]="getControl(control,field)" [field]="field">
      </dyna-text>

      <dyna-text *ngSwitchCase="'number'" type="number" [control]="getControl(control,field)" [field]="field">
      </dyna-text>

      <dyna-text *ngSwitchCase="'url'" type="url" [control]="getControl(control,field)" [field]="field">
      </dyna-text>


      <!-- Longer text fields -->
      <dyna-textarea *ngSwitchCase="'textarea'" [control]="getControl(control,field)" [field]="field">
      </dyna-textarea>


      <!-- Option fields -->
      <dyna-dropdown *ngSwitchCase="'dropdown'" [control]="getControl(control,field)" [field]="field">
      </dyna-dropdown>

      <dyna-checkbox *ngSwitchCase="'checkbox'" [control]="getControl(control,field)" [field]="field">
      </dyna-checkbox>

      <dyna-checkbox-group *ngSwitchCase="'checkbox-group'" [control]="getControl(control,field)" [field]="field">
      </dyna-checkbox-group>

      <dyna-relation-select *ngSwitchCase="'relation'" [control]="getControl(control,field)" [field]="field">
      </dyna-relation-select>


      <!-- Async fields -->
      <dyna-action *ngSwitchCase="'action'" [control]="getControl(control, field)" [field]="field">
      </dyna-action>

      <!-- Other fields -->
      <dyna-color *ngSwitchCase="'color'" [control]="getControl(control,field)" [field]="field"></dyna-color>

      <!-- Sub form fields -->
      <dyna-repeater *ngSwitchCase="'repeater'" [controlsArray]="getControl(control,field)" [field]="field"
                     [fields]="field.fields">
      </dyna-repeater>

      <dyna-group *ngSwitchCase="'map'" [control]="getControl(control,field)" [field]="field" [fields]="field.fields">
      </dyna-group>

      <div *ngSwitchDefault>
        {{field.type}}
      </div>
    </div>
  </ng-container>

  <button *ngIf="!submit.hidden" [disabled]="form.invalid" (click)="submitValues()">Submit</button>

  {{form.valid}}

</div>
