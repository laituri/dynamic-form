<p class="label">
  {{field.title}}
</p>
<div class="container" cdkDropList (cdkDropListDropped)="drop($event)">
  <div class="sub-array" *ngFor="let control of controlsArray.controls; let i = index" [formGroup]="control" cdkDrag>
    <div class="actions">
      <mat-icon class="delete" (click)="deleteControlItem(i)">
        delete
      </mat-icon>
      <div class="handle" cdkDragHandle></div>
    </div>
    <div class="fields">
      <div *ngFor="let field of fields" [ngSwitch]="field.type" [hidden]="field | fieldParent: control | async">

        <dyna-text *ngSwitchCase="'text'" type="text" [control]="getControl(control,field)" [field]="field">
        </dyna-text>

        <dyna-text *ngSwitchCase="'email'" type="email" [control]="getControl(control,field)" [field]="field">
        </dyna-text>

        <dyna-text *ngSwitchCase="'tel'" type="tel" [control]="getControl(control,field)" [field]="field">
        </dyna-text>

        <dyna-text *ngSwitchCase="'number'" type="number" [control]="getControl(control,field)" [field]="field">
        </dyna-text>

        <dyna-text *ngSwitchCase="'url'" type="url" [control]="getControl(control,field)" [field]="field">
        </dyna-text>

        <dyna-textarea *ngSwitchCase="'textarea'" [control]="getControl(control,field)" [field]="field">
        </dyna-textarea>

        <dyna-dropdown *ngSwitchCase="'dropdown'" [control]="getControl(control, field)" [field]="field">
        </dyna-dropdown>

        <dyna-checkbox *ngSwitchCase="'checkbox'" [control]="getControl(control, field)" [field]="field">
        </dyna-checkbox>

        <dyna-checkbox-group *ngSwitchCase="'checkbox-group'" [control]="getControl(control,field)" [field]="field">
        </dyna-checkbox-group>

        <dyna-action *ngSwitchCase="'action'" [control]="getControl(control, field)" [field]="field">
        </dyna-action>

        <dyna-sub-array-form *ngSwitchCase="'repeater'" [field]="field" [controlsArray]="getControl(control, field)"
                             [fields]="field.fields">
        </dyna-sub-array-form>

        <dyna-sub-group-form *ngSwitchCase="'map'" [field]="field" [control]="getControl(control, field)"
                             [fields]="field.fields">
        </dyna-sub-group-form>

        <div *ngSwitchDefault>
          {{field.type}}
        </div>
      </div>
    </div>
    <hr style="margin: 20px;">
  </div>
</div>
<button (click)="addItem()">Add new</button>
